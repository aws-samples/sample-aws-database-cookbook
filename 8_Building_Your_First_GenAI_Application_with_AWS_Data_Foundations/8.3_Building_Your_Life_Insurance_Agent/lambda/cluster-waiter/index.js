"use strict";
// lambda/cluster-waiter/index.ts
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const client_rds_1 = require("@aws-sdk/client-rds");
const sleep = (ms) => new Promise(resolve => setTimeout(resolve, ms));
async function waitForClusterAndInstances(rds, clusterId, maxAttempts = 60, delay = 30000) {
    for (let attempt = 0; attempt < maxAttempts; attempt++) {
        try {
            // Check cluster status
            const clusterCommand = new client_rds_1.DescribeDBClustersCommand({ DBClusterIdentifier: clusterId });
            const clusterResponse = await rds.send(clusterCommand);
            const cluster = clusterResponse.DBClusters?.[0];
            if (!cluster || cluster.Status !== 'available') {
                console.log(`Attempt ${attempt + 1}: Cluster ${clusterId} not yet available. Status: ${cluster?.Status}`);
                await sleep(delay);
                continue;
            }
            // Check instances status
            const instanceCommand = new client_rds_1.DescribeDBInstancesCommand({
                Filters: [{ Name: 'db-cluster-id', Values: [clusterId] }]
            });
            const instanceResponse = await rds.send(instanceCommand);
            const instances = instanceResponse.DBInstances;
            if (!instances || instances.length === 0) {
                console.log(`Attempt ${attempt + 1}: No instances found for cluster ${clusterId}`);
                await sleep(delay);
                continue;
            }
            const allInstancesAvailable = instances.every((instance) => instance.DBInstanceStatus === 'available');
            if (allInstancesAvailable) {
                console.log(`All instances are available for cluster ${clusterId}`);
                return true;
            }
            console.log(`Attempt ${attempt + 1}: Not all instances available yet for cluster ${clusterId}`);
            await sleep(delay);
        }
        catch (error) {
            console.error(`Error checking status for cluster ${clusterId}:`, error);
            await sleep(delay);
        }
    }
    throw new Error(`Cluster ${clusterId} or its instances did not become available within the expected time`);
}
const handler = async (event) => {
    console.log('Event:', JSON.stringify(event, null, 2));
    if (event.RequestType === 'Delete') {
        return {
            PhysicalResourceId: event.PhysicalResourceId || '',
            Status: 'SUCCESS'
        };
    }
    try {
        const rds = new client_rds_1.RDSClient({ region: process.env.AWS_REGION });
        // Wait for policy cluster
        const policyClusterId = event.ResourceProperties.policyClusterArn.split(':cluster:')[1];
        console.log('Waiting for policy cluster:', policyClusterId);
        await waitForClusterAndInstances(rds, policyClusterId);
        // Wait for KB cluster
        const kbClusterId = event.ResourceProperties.kbClusterArn.split(':cluster:')[1];
        console.log('Waiting for KB cluster:', kbClusterId);
        await waitForClusterAndInstances(rds, kbClusterId);
        return {
            PhysicalResourceId: `${policyClusterId}-${kbClusterId}`,
            Status: 'SUCCESS'
        };
    }
    catch (error) {
        console.error('Error waiting for clusters:', error);
        return {
            PhysicalResourceId: 'failed-cluster-wait',
            Status: 'FAILED',
            Reason: error instanceof Error ? error.message : 'Unknown error'
        };
    }
};
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsaUNBQWlDOzs7QUFFakMsb0RBTTZCO0FBaUI3QixNQUFNLEtBQUssR0FBRyxDQUFDLEVBQVUsRUFBRSxFQUFFLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFFOUUsS0FBSyxVQUFVLDBCQUEwQixDQUFDLEdBQWMsRUFBRSxTQUFpQixFQUFFLFdBQVcsR0FBRyxFQUFFLEVBQUUsS0FBSyxHQUFHLEtBQUs7SUFDeEcsS0FBSyxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUUsT0FBTyxHQUFHLFdBQVcsRUFBRSxPQUFPLEVBQUUsRUFBRSxDQUFDO1FBQ3JELElBQUksQ0FBQztZQUNELHVCQUF1QjtZQUN2QixNQUFNLGNBQWMsR0FBRyxJQUFJLHNDQUF5QixDQUFDLEVBQUUsbUJBQW1CLEVBQUUsU0FBUyxFQUFFLENBQUMsQ0FBQztZQUN6RixNQUFNLGVBQWUsR0FBRyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDdkQsTUFBTSxPQUFPLEdBQUcsZUFBZSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBYyxDQUFDO1lBRTdELElBQUksQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxXQUFXLEVBQUUsQ0FBQztnQkFDN0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLE9BQU8sR0FBRyxDQUFDLGFBQWEsU0FBUywrQkFBK0IsT0FBTyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7Z0JBQzFHLE1BQU0sS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO2dCQUNuQixTQUFTO1lBQ2IsQ0FBQztZQUVELHlCQUF5QjtZQUN6QixNQUFNLGVBQWUsR0FBRyxJQUFJLHVDQUEwQixDQUFDO2dCQUNuRCxP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Q3ZELE1BQU0sRUFBRSxTQUFTO1NBQ3BCLENBQUM7SUFDTixDQUFDO0lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztRQUNiLE9BQU8sQ0FBQyxLQUFLLENBQUMsNkJBQTZCLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDcEQsT0FBTztZQUNILGtCQUFrQixFQUFFLHFCQUFxQjtZQUN6QyxNQUFNLEVBQUUsUUFBUTtZQUNoQixNQUFNLEVBQUUsS0FBSyxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsZUFBZTtTQUNuRSxDQUFDO0lBQ04sQ0FBQztBQUNMLENBQUMsQ0FBQztBQW5DVyxRQUFBLE9BQU8sV0FtQ2xCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gbGFtYmRhL2NsdXN0ZXItd2FpdGVyL2luZGV4LnRzXG5cbmltcG9ydCB7IFxuICBSRFNDbGllbnQsIFxuICBEZXNjcmliZURCQ2x1c3RlcnNDb21tYW5kLCBcbiAgRGVzY3JpYmVEQkluc3RhbmNlc0NvbW1hbmQsXG4gIERCQ2x1c3RlcixcbiAgREJJbnN0YW5jZVxufSBmcm9tICdAYXdzLXNkay9jbGllbnQtcmRzJztcblxuaW50ZXJmYWNlIEN1c3RvbVJlc291cmNlRXZlbnQge1xuICBSZXF1ZXN0VHlwZTogJ0NyZWF0ZScgfCAnVXBkYXRlJyB8ICdEZWxldGUnO1xuICBQaHlzaWNhbFJlc291cmNlSWQ/OiBzdHJpbmc7XG4gIFJlc291cmNlUHJvcGVydGllczoge1xuICAgIHBvbGljeUNsdXN0ZXJBcm46IHN0cmluZztcbiAgICBrYkNsdXN0ZXJBcm46IHN0cmluZztcbiAgfTtcbn1cblxuaW50ZXJmYWNlIEN1c3RvbVJlc291cmNlUmVzcG9uc2Uge1xuICBQaHlzaWNhbFJlc291cmNlSWQ6IHN0cmluZztcbiAgU3RhdHVzOiAnU1VDQ0VTUycgfCAnRkFJTEVEJztcbiAgUmVhc29uPzogc3RyaW5nO1xufVxuXG5jb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuYXN5bmMgZnVuY3Rpb24gd2FpdEZvckNsdXN0ZXJBbmRJbnN0YW5jZXMocmRzOiBSRFNDbGllbnQsIGNsdXN0ZXJJZDogc3RyaW5nLCBtYXhBdHRlbXB0cyA9IDYwLCBkZWxheSA9IDMwMDAwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCBtYXhBdHRlbXB0czsgYXR0ZW1wdCsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDaGVjayBjbHVzdGVyIHN0YXR1c1xuICAgICAgICAgICAgY29uc3QgY2x1c3RlckNvbW1hbmQgPSBuZXcgRGVzY3JpYmVEQkNsdXN0ZXJzQ29tbWFuZCh7IERCQ2x1c3RlcklkZW50aWZpZXI6IGNsdXN0ZXJJZCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXJSZXNwb25zZSA9IGF3YWl0IHJkcy5zZW5kKGNsdXN0ZXJDb21tYW5kKTtcbiAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXIgPSBjbHVzdGVyUmVzcG9uc2UuREJDbHVzdGVycz8uWzBdIGFzIERCQ2x1c3RlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFjbHVzdGVyIHx8IGNsdXN0ZXIuU3RhdHVzICE9PSAnYXZhaWxhYmxlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBdHRlbXB0ICR7YXR0ZW1wdCArIDF9OiBDbHVzdGVyICR7Y2x1c3RlcklkfSBub3QgeWV0IGF2YWlsYWJsZS4gU3RhdHVzOiAke2NsdXN0ZXI/LlN0YXR1c31gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzbGVlcChkZWxheSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGluc3RhbmNlcyBzdGF0dXNcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlQ29tbWFuZCA9IG5ldyBEZXNjcmliZURCSW5zdGFuY2VzQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgRmlsdGVyczogW3sgTmFtZTogJ2RiLWNsdXN0ZXItaWQnLCBWYWx1ZXM6IFtjbHVzdGVySWRdIH1dXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlUmVzcG9uc2UgPSBhd2FpdCByZHMuc2VuZChpbnN0YW5jZUNvbW1hbmQpO1xuICAgICAgICAgICAgY29uc3QgaW5zdGFuY2VzID0gaW5zdGFuY2VSZXNwb25zZS5EQkluc3RhbmNlcyBhcyBEQkluc3RhbmNlW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghaW5zdGFuY2VzIHx8IGluc3RhbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdCAke2F0dGVtcHQgKyAxfTogTm8gaW5zdGFuY2VzIGZvdW5kIGZvciBjbHVzdGVyICR7Y2x1c3RlcklkfWApO1xuICAgICAgICAgICAgICAgIGF3YWl0IHNsZWVwKGRlbGF5KTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYWxsSW5zdGFuY2VzQXZhaWxhYmxlID0gaW5zdGFuY2VzLmV2ZXJ5KFxuICAgICAgICAgICAgICAgIChpbnN0YW5jZTogREJJbnN0YW5jZSkgPT4gaW5zdGFuY2UuREJJbnN0YW5jZVN0YXR1cyA9PT0gJ2F2YWlsYWJsZSdcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhbGxJbnN0YW5jZXNBdmFpbGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQWxsIGluc3RhbmNlcyBhcmUgYXZhaWxhYmxlIGZvciBjbHVzdGVyICR7Y2x1c3RlcklkfWApO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQXR0ZW1wdCAke2F0dGVtcHQgKyAxfTogTm90IGFsbCBpbnN0YW5jZXMgYXZhaWxhYmxlIHlldCBmb3IgY2x1c3RlciAke2NsdXN0ZXJJZH1gKTtcbiAgICAgICAgICAgIGF3YWl0IHNsZWVwKGRlbGF5KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIHN0YXR1cyBmb3IgY2x1c3RlciAke2NsdXN0ZXJJZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgYXdhaXQgc2xlZXAoZGVsYXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgQ2x1c3RlciAke2NsdXN0ZXJJZH0gb3IgaXRzIGluc3RhbmNlcyBkaWQgbm90IGJlY29tZSBhdmFpbGFibGUgd2l0aGluIHRoZSBleHBlY3RlZCB0aW1lYCk7XG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVyID0gYXN5bmMgKGV2ZW50OiBDdXN0b21SZXNvdXJjZUV2ZW50KTogUHJvbWlzZTxDdXN0b21SZXNvdXJjZVJlc3BvbnNlPiA9PiB7XG4gICAgY29uc29sZS5sb2coJ0V2ZW50OicsIEpTT04uc3RyaW5naWZ5KGV2ZW50LCBudWxsLCAyKSk7XG4gICAgXG4gICAgaWYgKGV2ZW50LlJlcXVlc3RUeXBlID09PSAnRGVsZXRlJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgUGh5c2ljYWxSZXNvdXJjZUlkOiBldmVudC5QaHlzaWNhbFJlc291cmNlSWQgfHwgJycsXG4gICAgICAgICAgICBTdGF0dXM6ICdTVUNDRVNTJ1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZHMgPSBuZXcgUkRTQ2xpZW50KHsgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgcG9saWN5IGNsdXN0ZXJcbiAgICAgICAgY29uc3QgcG9saWN5Q2x1c3RlcklkID0gZXZlbnQuUmVzb3VyY2VQcm9wZXJ0aWVzLnBvbGljeUNsdXN0ZXJBcm4uc3BsaXQoJzpjbHVzdGVyOicpWzFdO1xuICAgICAgICBjb25zb2xlLmxvZygnV2FpdGluZyBmb3IgcG9saWN5IGNsdXN0ZXI6JywgcG9saWN5Q2x1c3RlcklkKTtcbiAgICAgICAgYXdhaXQgd2FpdEZvckNsdXN0ZXJBbmRJbnN0YW5jZXMocmRzLCBwb2xpY3lDbHVzdGVySWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gV2FpdCBmb3IgS0IgY2x1c3RlclxuICAgICAgICBjb25zdCBrYkNsdXN0ZXJJZCA9IGV2ZW50LlJlc291cmNlUHJvcGVydGllcy5rYkNsdXN0ZXJBcm4uc3BsaXQoJzpjbHVzdGVyOicpWzFdO1xuICAgICAgICBjb25zb2xlLmxvZygnV2FpdGluZyBmb3IgS0IgY2x1c3RlcjonLCBrYkNsdXN0ZXJJZCk7XG4gICAgICAgIGF3YWl0IHdhaXRGb3JDbHVzdGVyQW5kSW5zdGFuY2VzKHJkcywga2JDbHVzdGVySWQpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFBoeXNpY2FsUmVzb3VyY2VJZDogYCR7cG9saWN5Q2x1c3RlcklkfS0ke2tiQ2x1c3RlcklkfWAsXG4gICAgICAgICAgICBTdGF0dXM6ICdTVUNDRVNTJ1xuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdhaXRpbmcgZm9yIGNsdXN0ZXJzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFBoeXNpY2FsUmVzb3VyY2VJZDogJ2ZhaWxlZC1jbHVzdGVyLXdhaXQnLFxuICAgICAgICAgICAgU3RhdHVzOiAnRkFJTEVEJyxcbiAgICAgICAgICAgIFJlYXNvbjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcbiAgICAgICAgfTtcbiAgICB9XG59O1xuIl19